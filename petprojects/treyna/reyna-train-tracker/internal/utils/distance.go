package utils

// DistanceMap маппинг станций на приблизительные расстояния от Москвы (в км)
// Основано на реальных расстояниях по Транссибирской магистрали
var DistanceMap = map[string]int{
	"Москва":                                     0,
	"Владимир Пасс":                              190,
	"Ковров 1":                                   250,
	"Нижний Новгород Московский (Московский вокзал)": 442,
	"Семенов":                                    500,
	"Киров Пасс":                                 896,
	"Зуевка":                                     980,
	"Глазов":                                     1140,
	"Балезино":                                   1190,
	"Пермь 2":                                    1397,
	"Екатеринбург-Пассажирс":                     1814,
	"Тюмень":                                     2144,
	"Омск-Пассажирский":                          2676,
	"Татарская":                                  2890,
	"Озеро-Карачинское":                          2940,
	"Барабинск":                                  3000,
	"Новосибирск-Главный":                        3303,
	"Юрга 1":                                     3476,
	"Яшкино":                                     3520,
	"Тайга":                                      3565,
	"Анжерская":                                  3616,
	"Яя":                                         3644,
	"Мариинск":                                   3710,
	"Тяжин":                                      3765,
	"Боготол":                                    3840,
	"Ачинск 1":                                   3917,
	"Красноярск Пасс":                            4098,
	"Уяр":                                        4226,
	"Заозерная":                                  4284,
	"Канск-Енисейский":                           4365,
	"Иланская":                                   4411,
	"Ингашская":                                  4465,
	"Решоты":                                     4520,
	"Юрты":                                       4630,
	"Тайшет":                                     4701,
	"Нижнеудинск":                                4872,
	"Тулун":                                      5017,
	"Зима":                                       5185,
	"Залари":                                     5258,
	"Черемхово":                                  5334,
	"Усолье-Сибирское":                           5410,
	"Ангарск":                                    5498,
	"Иркутск-Сорт":                               5520,
	"Иркутск Пассажирский":                       5642,
	"Слюдянка 1":                                 5777,
	"Байкальск":                                  5820,
	"Мысовая":                                    5924,
	"Улан-Удэ Пасс":                              6074,
	"Заудинский":                                 6095,
	"Новоильинский":                              6165,
	"Петровский Завод":                           6275,
	"Бада":                                       6390,
	"Хилок":                                      6473,
	"Хушенга":                                    6528,
	"Харагун":                                    6562,
	"Могзон":                                     6640,
	"Чита 2":                                     6800,
	"Карымская":                                  6312,
	"Солнцевая":                                  6450,
	"Шилка-Пасс.":                                6515,
	"Приисковая":                                 6575,
	"Куэнга":                                     6630,
	"Чернышевск-Забайкальск":                     6715,
	"Жирекен":                                    6785,
	"Зилово":                                     6840,
	"Ксеньевская ":                               6980,
	"Могоча":                                     7124,
	"Амазар":                                     7220,
	"Ерофей Павлович":                            7306,
	"Уруша":                                      7442,
	"Сковородино":                                7573,
	"Талдан":                                     7695,
	"Магдагачи":                                  7811,
	"Тыгда":                                      7912,
	"Шимановская":                                8042,
	"Ледяная":                                    8095,
	"Свободный":                                  8150,
	"Серышево":                                   8208,
	"Белогорск":                                  8250,
	"Поздеевка":                                  8320,
	"Екатеринославка":                            8360,
	"Завитая":                                    8420,
	"Бурея":                                      8480,
	"Архара":                                     8555,
	"Облучье":                                    8730,
	"Известковая":                                8798,
	"Биробиджан 1":                               8932,
	"Хабаровск 1":                                9104,
}

// GetDistance получает приблизительное расстояние от Москвы
func GetDistance(cityName string) int {
	if dist, ok := DistanceMap[cityName]; ok {
		return dist
	}
	return 0
}

// CalculateDistanceBetween рассчитывает расстояние между двумя станциями
func CalculateDistanceBetween(from, to string) int {
	distFrom := GetDistance(from)
	distTo := GetDistance(to)

	if distTo > distFrom {
		return distTo - distFrom
	}
	return distFrom - distTo
}

// InterpolateDistance интерполирует расстояние между двумя станциями
// на основе времени (используется для определения текущего положения между станциями)
func InterpolateDistance(fromDist, toDist int, progress float64) float64 {
	if progress < 0 {
		progress = 0
	}
	if progress > 1 {
		progress = 1
	}

	diff := float64(toDist - fromDist)
	return float64(fromDist) + (diff * progress)
}

